<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <title>í”„ë¡œì íŠ¸ ìƒì„¸ ì •ë³´ ë¡œë”© ì¤‘... - ê¹€ë‚¨í•´</title>
    <meta name="description" content="ê¹€ë‚¨í•´ í¬íŠ¸í´ë¦¬ì˜¤ í”„ë¡œì íŠ¸ ìƒì„¸ ì •ë³´"/>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="style.css">
</head>
<body>
<h1 class="visually-hidden">í”„ë¡œì íŠ¸ ìƒì„¸ ì •ë³´</h1>
<button class="dark-toggle" aria-label="í…Œë§ˆ ì „í™˜">ë‹¤í¬ ëª¨ë“œ</button>

<div id="header-placeholder"></div>

<main>
    <section id="project-details" class="content js-scroll-fade-in">
        <h2 id="project-title" style="min-height: 1.2em;"></h2>
        <img id="project-image" src="" alt="í”„ë¡œì íŠ¸ ì´ë¯¸ì§€" style="max-width: 100%; height: auto; border-radius: 8px; margin-bottom: 30px; display: none; box-shadow: 0 4px 10px var(--shadow-color); opacity: 0; transition: opacity 0.5s;">

        <div class="project-meta">
            <p><strong>ğŸ—“ï¸ í”„ë¡œì íŠ¸ ê¸°ê°„:</strong> <span id="project-period"></span></p>
            <p><strong>ğŸ› ï¸ ì‚¬ìš© ê¸°ìˆ :</strong> <span id="project-tech"></span></p>
        </div>

        <h3>ğŸ“„ í”„ë¡œì íŠ¸ ì†Œê°œ</h3>
        <div id="project-description">
            <p>í”„ë¡œì íŠ¸ ì„¤ëª…ì„ ë¡œë”© ì¤‘ì…ë‹ˆë‹¤...</p>
        </div>

        <h3>âœ¨ ë‚˜ì˜ ì—­í•  ë° ê¸°ì—¬</h3>
        <ul id="project-roles">
            <li>ì—­í•  ì •ë³´ë¥¼ ë¡œë”© ì¤‘ì…ë‹ˆë‹¤...</li>
        </ul>

        <a href="index.html" class="back-to-list-btn">â† ì „ì²´ ëª©ë¡ìœ¼ë¡œ ëŒì•„ê°€ê¸°</a>

    </section>
</main>

<div id="footer-placeholder"></div>

<div class="overlay" id="menuOverlay"></div>

<script src="script.js"></script>

<script>
    document.addEventListener('DOMContentLoaded', async () => {
        const urlParams = new URLSearchParams(window.location.search);
        const projectId = urlParams.get('id');
        const detailsSection = document.getElementById('project-details');
        const titleElement = document.getElementById('project-title');
        const periodElement = document.getElementById('project-period');
        const techElement = document.getElementById('project-tech');
        const descriptionElement = document.getElementById('project-description');
        const rolesListElement = document.getElementById('project-roles');
        const imageElement = document.getElementById('project-image');
        const backButton = document.querySelector('.back-to-list-btn');

        // ë’¤ë¡œê°€ê¸° ë²„íŠ¼ í…ìŠ¤íŠ¸ ë° ë™ì‘ ë³€ê²½ (ì´ì „ í˜ì´ì§€ê°€ index.htmlì´ë©´)
        if (backButton && document.referrer && document.referrer.includes('index.html')) {
            backButton.textContent = 'â† ì´ì „ í˜ì´ì§€ë¡œ ëŒì•„ê°€ê¸°';
            backButton.onclick = (e) => {
                e.preventDefault(); // ê¸°ë³¸ ë§í¬ ë™ì‘ ë°©ì§€
                window.history.back(); // ë¸Œë¼ìš°ì € ë’¤ë¡œê°€ê¸° ì‹¤í–‰
            };
        }

        // í•„ìˆ˜ ìš”ì†Œ ì—†ìœ¼ë©´ ì—ëŸ¬ ì²˜ë¦¬
        if (!projectId || !detailsSection || !titleElement || !periodElement || !techElement || !descriptionElement || !rolesListElement || !imageElement) {
            if (titleElement) titleElement.textContent = 'í˜ì´ì§€ ë¡œë”© ì˜¤ë¥˜';
            if (descriptionElement) descriptionElement.innerHTML = '<p>í˜ì´ì§€ì˜ í•„ìˆ˜ êµ¬ì„± ìš”ì†Œë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤. HTML êµ¬ì¡°ë¥¼ í™•ì¸í•´ì£¼ì„¸ìš”.</p>';
            console.error('Project detail page initialization failed: Essential elements not found.');
            if(backButton) backButton.style.display = 'block'; // ë’¤ë¡œê°€ê¸° ë²„íŠ¼ì€ í‘œì‹œ
            return;
        }

        // ë°ì´í„° ë¡œë”© ë° í‘œì‹œ
        try {
            const response = await fetch('data.json');
            if (!response.ok) throw new Error(`ë°ì´í„° íŒŒì¼ì„ ë¶ˆëŸ¬ì˜¤ëŠ”ë° ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤. (status: ${response.status})`);
            const data = await response.json();
            const project = data.projects.find(p => p.id === projectId);

            if (!project) {
                titleElement.textContent = 'í”„ë¡œì íŠ¸ ì—†ìŒ';
                descriptionElement.innerHTML = `<p>ìš”ì²­í•˜ì‹  ID ('${projectId}')ì— í•´ë‹¹í•˜ëŠ” í”„ë¡œì íŠ¸ ì •ë³´ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.</p>`;
                // ê´€ë ¨ ì •ë³´ ì˜ì—­ ìˆ¨ê¹€
                periodElement.closest('.project-meta').style.display = 'none';
                rolesListElement.previousElementSibling.style.display = 'none'; // h3 ìˆ¨ê¹€
                rolesListElement.style.display = 'none';
                if(backButton) backButton.style.display = 'block';
                return;
            }

            // ë°ì´í„° ë°”ì¸ë”©
            document.title = `${project.title || 'í”„ë¡œì íŠ¸ ìƒì„¸'} - ê¹€ë‚¨í•´`;
            titleElement.textContent = project.title || 'ì œëª© ì—†ìŒ';

            if (project.detailImage) {
                imageElement.src = project.detailImage;
                imageElement.alt = `${project.title || 'í”„ë¡œì íŠ¸'} ìƒì„¸ ì´ë¯¸ì§€`;
                imageElement.style.display = 'block';
                // ì´ë¯¸ì§€ ë¡œë“œ ì™„ë£Œ í›„ í‘œì‹œ (ë¶€ë“œëŸ¬ìš´ íš¨ê³¼)
                imageElement.onload = () => { imageElement.style.opacity = 1; };
            } else {
                imageElement.style.display = 'none';
            }

            periodElement.textContent = project.period || 'ì •ë³´ ì—†ìŒ';

            if (project.technologies && project.technologies.length > 0) {
                techElement.innerHTML = project.technologies.map(tech => `<span class="tech-tag">${tech}</span>`).join(' ');
            } else {
                techElement.innerHTML = '<span class="no-info">ì •ë³´ ì—†ìŒ</span>'; // ì •ë³´ ì—†ì„ ë•Œ í‘œì‹œ
            }

            descriptionElement.innerHTML = project.description || '<p class="no-info">ìƒì„¸ ì„¤ëª…ì´ ì—†ìŠµë‹ˆë‹¤.</p>';

            rolesListElement.innerHTML = ''; // ê¸°ì¡´ ë‚´ìš© ë¹„ìš°ê¸°
            if (project.roles && project.roles.length > 0) {
                project.roles.forEach(role => {
                    const li = document.createElement('li');
                    li.textContent = role;
                    rolesListElement.appendChild(li);
                });
            } else {
                rolesListElement.innerHTML = '<li class="no-info">ê¸°ì—¬ ì—­í•  ì •ë³´ê°€ ì—†ìŠµë‹ˆë‹¤.</li>';
            }

            // ë¡œë“œ ì™„ë£Œ í›„ ìŠ¤í¬ë¡¤ í˜ì´ë“œì¸ íš¨ê³¼ ì ìš©ë˜ë„ë¡
            // detailsSectionì— js-scroll-fade-in í´ë˜ìŠ¤ê°€ ì´ë¯¸ ìˆìœ¼ë¯€ë¡œ script.jsì—ì„œ ì²˜ë¦¬

        } catch (error) {
            console.error('í”„ë¡œì íŠ¸ ìƒì„¸ ì •ë³´ ë¡œë”© ì˜¤ë¥˜:', error);
            titleElement.textContent = 'ì˜¤ë¥˜ ë°œìƒ';
            descriptionElement.innerHTML = `<p>í”„ë¡œì íŠ¸ ì •ë³´ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘ ë¬¸ì œê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.</p><p style="color: red;">${error.message}</p>`;
            // ì˜¤ë¥˜ ì‹œ ê´€ë ¨ ì •ë³´ ìˆ¨ê¹€
            periodElement.closest('.project-meta').style.display = 'none';
            rolesListElement.previousElementSibling.style.display = 'none'; // h3 ìˆ¨ê¹€
            rolesListElement.style.display = 'none';
            if (imageElement) imageElement.style.display = 'none';
            if(backButton) backButton.style.display = 'block';
        }
    });
</script>
</body>
</html>